(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{709:(e,s,t)=>{"use strict";t.d(s,{Zr:()=>a});let r=e=>s=>{try{let t=e(s);if(t instanceof Promise)return t;return{then:e=>r(e)(t),catch(e){return this}}}catch(e){return{then(e){return this},catch:s=>r(s)(e)}}},a=(e,s)=>(t,a,i)=>{let l,d={storage:function(e,s){let t;try{t=e()}catch(e){return}return{getItem:e=>{var s;let r=e=>null===e?null:JSON.parse(e,void 0),a=null!=(s=t.getItem(e))?s:null;return a instanceof Promise?a.then(r):r(a)},setItem:(e,s)=>t.setItem(e,JSON.stringify(s,void 0)),removeItem:e=>t.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,s)=>({...s,...e}),...s},n=!1,o=new Set,c=new Set,m=d.storage;if(!m)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),t(...e)},a,i);let u=()=>{let e=d.partialize({...a()});return m.setItem(d.name,{state:e,version:d.version})},h=i.setState;i.setState=(e,s)=>{h(e,s),u()};let x=e((...e)=>{t(...e),u()},a,i);i.getInitialState=()=>x;let p=()=>{var e,s;if(!m)return;n=!1,o.forEach(e=>{var s;return e(null!=(s=a())?s:x)});let i=(null==(s=d.onRehydrateStorage)?void 0:s.call(d,null!=(e=a())?e:x))||void 0;return r(m.getItem.bind(m))(d.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===d.version)return[!1,e.state];if(d.migrate){let s=d.migrate(e.state,e.version);return s instanceof Promise?s.then(e=>[!0,e]):[!0,s]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var s;let[r,i]=e;if(t(l=d.merge(i,null!=(s=a())?s:x),!0),r)return u()}).then(()=>{null==i||i(l,void 0),l=a(),n=!0,c.forEach(e=>e(l))}).catch(e=>{null==i||i(void 0,e)})};return i.persist={setOptions:e=>{d={...d,...e},e.storage&&(m=e.storage)},clearStorage:()=>{null==m||m.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>p(),hasHydrated:()=>n,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(c.add(e),()=>{c.delete(e)})},d.skipHydration||p(),l||x}},1418:(e,s,t)=>{"use strict";t.d(s,{n:()=>l});var r=t(9827),a=t(709);let i={"user@example.com":{user:{id:"1",email:"user@example.com",firstName:"John",lastName:"Doe",phone:"555-123-4567",addresses:[{id:"1",name:"Home",street:"123 Main St",city:"Stockholm",postalCode:"12345",country:"Sweden",isDefault:!0}]},password:"password123"}},l=(0,r.v)()((0,a.Zr)((e,s)=>({user:null,isAuthenticated:!1,isLoading:!1,error:null,login:async(s,t)=>{e({isLoading:!0,error:null}),await new Promise(e=>setTimeout(e,1e3));try{let r=i[s.toLowerCase()];if(!r||r.password!==t)throw Error("Invalid email or password");e({user:r.user,isAuthenticated:!0,isLoading:!1})}catch(s){e({error:s instanceof Error?s.message:"An error occurred",isLoading:!1})}},register:async(s,t)=>{e({isLoading:!0,error:null}),await new Promise(e=>setTimeout(e,1e3));try{if(i[s.email.toLowerCase()])throw Error("Email already in use");let r={id:Math.random().toString(36).substring(2,9),...s,addresses:[]};i[s.email.toLowerCase()]={user:r,password:t},e({user:r,isAuthenticated:!0,isLoading:!1})}catch(s){e({error:s instanceof Error?s.message:"An error occurred",isLoading:!1})}},logout:()=>{e({user:null,isAuthenticated:!1})},updateUser:t=>{let{user:r}=s();r&&e({user:{...r,...t}})},addAddress:t=>{var r;let{user:a}=s();if(!a)return;let i={id:Math.random().toString(36).substring(2,9),...t,isDefault:(null===(r=a.addresses)||void 0===r?void 0:r.length)===0||t.isDefault},l=[...a.addresses||[]];i.isDefault&&(l=l.map(e=>({...e,isDefault:!1}))),l.push(i),e({user:{...a,addresses:l}})},updateAddress:(t,r)=>{let{user:a}=s();if(!a||!a.addresses)return;let i=a.addresses.findIndex(e=>e.id===t);if(-1===i)return;let l=[...a.addresses];l[i]={...l[i],...r},r.isDefault&&l.forEach((e,s)=>{s!==i&&(e.isDefault=!1)}),e({user:{...a,addresses:l}})},removeAddress:t=>{var r;let{user:a}=s();if(!a||!a.addresses)return;let i=a.addresses.filter(e=>e.id!==t);(null===(r=a.addresses.find(e=>e.id===t))||void 0===r?void 0:r.isDefault)&&i.length>0&&(i[0].isDefault=!0),e({user:{...a,addresses:i}})},setDefaultAddress:t=>{let{user:r}=s();if(!r||!r.addresses)return;let a=r.addresses.map(e=>({...e,isDefault:e.id===t}));e({user:{...r,addresses:a}})},clearError:()=>{e({error:null})}}),{name:"smart-shop-auth",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated})}))},2997:(e,s,t)=>{"use strict";t.d(s,{default:()=>c});var r=t(5155),a=t(2115),i=t(9362),l=t(7861),d=t(8805);let n=(0,t(4057).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var o=t(3312);let c=e=>{let{title:s="Recommended for you",description:t="Based on your shopping cart and browsing history",maxRecommendations:c=4}=e,{items:m}=(0,i.x)(),[u,h]=(0,a.useState)([]);(0,a.useEffect)(()=>{h((()=>{let e=[];for(let s of m){let t=s.name.toLowerCase().split(" ");e.push(...t.filter(e=>e.length>3&&!["with","from","the"].includes(e)))}if(0===e.length||0===m.length)return x(c);let s=m.map(e=>e.id),t=d.b.filter(e=>!s.includes(e.id)).map(s=>{let t="".concat(s.name," ").concat(s.brand).toLowerCase().split(" "),r=0;for(let s of e)t.some(e=>e.includes(s)||s.includes(e))&&(r+=1);return{product:s,score:r}}).sort((e,s)=>s.score-e.score).slice(0,c).map(e=>e.product);if(t.length<c){let e=x(c-t.length,[...s,...t.map(e=>e.id)]);return[...t,...e]}return t})())},[m,c]);let x=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return d.b.filter(e=>!s.includes(e.id)).sort(()=>.5-Math.random()).slice(0,e)};return 0===u.length?null:(0,r.jsxs)("section",{className:"mt-12 mb-16",children:[(0,r.jsxs)("div",{className:"flex justify-between items-end mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:s}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:t})]}),(0,r.jsxs)(o.$,{variant:"link",className:"text-green-600 flex items-center gap-1 hover:text-green-700",children:["View all",(0,r.jsx)(n,{className:"h-4 w-4"})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:u.map(e=>(0,r.jsx)(l.default,{product:e},e.id))})]})}},6046:(e,s,t)=>{"use strict";var r=t(6658);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},7002:(e,s,t)=>{Promise.resolve().then(t.bind(t,8961))},7193:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},8961:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j});var r=t(5155),a=t(2115),i=t(6046),l=t(5565),d=t(9362),n=t(1418),o=t(3312),c=t(7193),m=t(9266),u=t(4057);let h=(0,u.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),x=(0,u.A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),p=(0,u.A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),g=(0,u.A)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var f=t(166),y=t(2997);let v=[{id:"ica",name:"ICA",logo:"https://ext.same-assets.com/2461038866/3524747834.svg",deliveryFee:49,minOrder:500,deliveryTime:"1-2 days",priceMultiplier:1},{id:"coop",name:"COOP",logo:"https://ext.same-assets.com/2461038866/4154634622.svg",deliveryFee:39,minOrder:700,deliveryTime:"Same day",priceMultiplier:1.03},{id:"willys",name:"Willys",logo:"https://ext.same-assets.com/2461038866/1116737128.svg",deliveryFee:29,minOrder:600,deliveryTime:"1-3 days",priceMultiplier:.98},{id:"hemkop",name:"Hemk\xf6p",logo:"https://ext.same-assets.com/2461038866/2792408408.svg",deliveryFee:59,minOrder:400,deliveryTime:"1 day",priceMultiplier:1.05}],j=()=>{let e=(0,i.useRouter)(),{items:s,getTotalPrice:t}=(0,d.x)(),{user:u,isAuthenticated:j}=(0,n.n)(),{addToast:b}=(0,f.d)(),[N,w]=(0,a.useState)([]),[k,S]=(0,a.useState)(""),[A,C]=(0,a.useState)(!0);(0,a.useEffect)(()=>{if(0===s.length){e.push("/"),b({title:"Empty Cart",description:"Your cart is empty. Add some items before proceeding to checkout.",type:"default"});return}let r=[...v.map(e=>{let s=t()*e.priceMultiplier,r=s+e.deliveryFee;return{...e,subtotal:s,total:r}})].sort((e,s)=>e.total-s.total);w(r),S(r[0].id),setTimeout(()=>{C(!1)},1500)},[s,t,e,b]);let M=s=>{let t=v.find(e=>e.id===s);b({title:"Store Redirect",description:"You would now be redirected to ".concat(null==t?void 0:t.name," to complete your purchase."),type:"success"}),setTimeout(()=>{e.push("/checkout/confirmation?store=".concat(null==t?void 0:t.name))},3e3)};return A?(0,r.jsx)("div",{className:"container max-w-6xl mx-auto py-16 px-4",children:(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center h-64",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-500 mb-4"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:"Comparing prices across stores..."}),(0,r.jsx)("p",{className:"text-gray-500 mt-2",children:"Finding the best deal for your shopping cart"})]})}):(0,r.jsxs)("div",{className:"container max-w-6xl mx-auto py-8 px-4",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Checkout"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Compare prices for your cart across different stores"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Your Cart Summary"}),(0,r.jsx)("div",{className:"divide-y",children:s.map(e=>(0,r.jsxs)("div",{className:"py-4 flex items-center gap-4",children:[(0,r.jsx)("div",{className:"relative w-16 h-16 rounded-md bg-gray-50 overflow-hidden",children:(0,r.jsx)(l.default,{src:e.imageUrl,alt:e.name,fill:!0,className:"object-contain p-1"})}),(0,r.jsxs)("div",{className:"flex-grow",children:[(0,r.jsx)("h3",{className:"text-sm font-medium",children:e.name}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:e.brand})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-sm font-semibold",children:[e.price.toFixed(2)," kr"]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["Qty: ",e.quantity]})]})]},e.id))}),(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,r.jsx)("span",{children:"Subtotal:"}),(0,r.jsxs)("span",{children:[t().toFixed(2)," kr"]})]}),(0,r.jsx)("div",{className:"text-xs text-gray-500 italic",children:"* Delivery fees and final prices vary by store"})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Compare Stores"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:N.map(e=>(0,r.jsxs)("div",{className:"border rounded-lg p-4 ".concat(e.id===k?"border-green-500 bg-green-50":"border-gray-200"),children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"relative h-8 w-20",children:(0,r.jsx)(l.default,{src:e.logo,alt:e.name,fill:!0,className:"object-contain"})}),(0,r.jsx)("h3",{className:"font-medium",children:e.name})]}),e.id===k&&(0,r.jsxs)("div",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full flex items-center",children:[(0,r.jsx)(c.A,{className:"h-3 w-3 mr-1"}),"Best price"]})]}),(0,r.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{children:"Subtotal:"}),(0,r.jsxs)("span",{children:[e.subtotal.toFixed(2)," kr"]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,r.jsx)("span",{children:"Delivery fee:"}),(0,r.jsxs)("span",{children:[e.deliveryFee.toFixed(2)," kr"]})]}),(0,r.jsxs)("div",{className:"flex justify-between font-semibold border-t pt-2",children:[(0,r.jsx)("span",{children:"Total:"}),(0,r.jsxs)("span",{children:[e.total.toFixed(2)," kr"]})]})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500 space-y-1 mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(m.A,{className:"h-3 w-3"}),(0,r.jsxs)("span",{children:["Min. order: ",e.minOrder," kr"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(h,{className:"h-3 w-3"}),(0,r.jsxs)("span",{children:["Delivery: ",e.deliveryTime]})]})]}),(0,r.jsxs)(o.$,{className:"w-full ".concat(e.id===k?"bg-green-600 hover:bg-green-700":"bg-gray-600 hover:bg-gray-700"," text-white"),onClick:()=>M(e.id),children:["Continue to ",e.name,(0,r.jsx)(x,{className:"h-4 w-4 ml-1"})]})]},e.id))}),(0,r.jsxs)("div",{className:"mt-6 bg-blue-50 border border-blue-100 rounded-md p-4 text-sm text-blue-800 flex items-start gap-2",children:[(0,r.jsx)(p,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium mb-1",children:"How Smart Shop works"}),(0,r.jsx)("p",{children:'Smart Shop compares your cart across multiple stores to find you the best deal. When you click "Continue to Store", you\'ll be redirected to complete your purchase directly with the chosen retailer.'})]})]})]}),(0,r.jsx)("div",{className:"mb-12",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,r.jsx)("div",{className:"mx-auto h-12 w-12 bg-green-100 rounded-full flex items-center justify-center mb-3",children:(0,r.jsx)(g,{className:"h-6 w-6 text-green-600"})}),(0,r.jsx)("h3",{className:"font-medium text-gray-900 mb-1",children:"Secure Shopping"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Your data is always protected"})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,r.jsx)("div",{className:"mx-auto h-12 w-12 bg-green-100 rounded-full flex items-center justify-center mb-3",children:(0,r.jsx)(m.A,{className:"h-6 w-6 text-green-600"})}),(0,r.jsx)("h3",{className:"font-medium text-gray-900 mb-1",children:"Fast Delivery"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Get your groceries when you need them"})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,r.jsx)("div",{className:"mx-auto h-12 w-12 bg-green-100 rounded-full flex items-center justify-center mb-3",children:(0,r.jsx)(c.A,{className:"h-6 w-6 text-green-600"})}),(0,r.jsx)("h3",{className:"font-medium text-gray-900 mb-1",children:"Best Prices"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Save up to 30% on your grocery shopping"})]})]})}),(0,r.jsx)(y.default,{title:"Frequently bought together",description:"Complete your purchase with these complementary products",maxRecommendations:4})]})}},9266:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(4057).A)("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[665,152,857,441,587,358],()=>s(7002)),_N_E=e.O()}]);